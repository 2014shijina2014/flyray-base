#业务平台接口文档
[TOC]
##阅读指南
本手册视为Vnb业务平台系统的结束开发人员编写的。阅读者应该具备一定的开发基础知识，对支付业务有一定的了解。
##内容简介
本手册包含如下内容：
     第一章：接口方案，详细介绍业务平台的接口总体方案
     第二章：数据报文，详细定义了每一种业务涉及的数据交换的接口报文格式
##接口方案
###总体部署
###技术架构
##数据报文
###报文总类
####请求报文
请求报文是指通过接口向业务平台系统发起的数据报文

|接口名称|地址|说明|
|:-------------|:----------|:----------|
|商户收款创建订单|/api/cms/query| |

####响应报文
响应报文是指业务平台对请求报文返回的处理结果
###报文格式
请求报文和响应报文由两部分组成：报文头、报文体
####请求报文
请求报文由请求报文头和报文体组成（报文体信息详情见报文体信息介绍）

|输入项	|输入项名称	|类型	|属性	|注释|
|:-----------|:-----------|:-----|:-----|:-----|
|txCode	  |交易码	    |string	|必输	||
|reqJrnNo	|请求流水号	|string	|必输	||
|reqDate	|请求日期	  |string	|必输	|YYYYMMDD|
|reqTime	|请求时间	  |string	|必输	|HHMMSS|
|version	|接口版本号	|string	|必输	|版本信息 |
说明：
    1、交易码为每个不同业务类型的交易码
    2、请求流水号由业务平台的唯一的业务标识，不可重复
    3、请求日期为业务日期，格式为YYYYMMDD
    4、请求时间为业务时间，格式为HHMMSS
    5、版本信息为报文的版本
####响应报文
响应报文由响应报文头和报文体组成（报文体信息详情见报文体信息介绍）

|输出项	|输出项名称	|类型	|属性	|注释|
|:-----------|:-----------|:-----|:-----|:-----|
|reqJrnNo	 |请求流水号	|string|必输	|                |
|resJrnNo	 |响应流水号	|string|必输	|                |
|resDate	 |响应日期	  |string|必输	|YYYYMMDD        |
|resTime	 |响应时间	  |string|必输	|HHMMSS          |
|txStatus	 |交易状态	  |string|必输	|00—成功 01—失败 |
|errorCode |错误码	    |string|输出	|                |
|errorMsg	 |错误信息	  |string|输出	|错误信息描述|
说明：
1、响应日期格式为YYYYMMDD
2、响应时间格式为HHMMSS
3、错误码错误信息为发生错误时的返回错误描述
###报文体格式
####商户收款创建订单

- 功能说明
城市宝生成收款订单的同时调用支付管家生成收款订单
- 交易码
 toReceiptProcess
- 输入描述
|输入项	|输入项名称	|类型	|属性	|注释|
|:-----------|:-----------|:-----|:-----|:-----|
|custName         |客户名称        |string   | 可输 ||
|merCustNo        |客户ID          |string   | 必输 ||
|acceptBizNo      |商户号          |string   | 必输 ||
|subBizNo         |子商户号        |string   | 可输 ||
|credNo           |证件号          |string   | 可输 ||
- JSON示例
```
{
    "data": {
        "message": "Cast to ObjectId failed for value \"557a3e326221681d474cf078sdsds\" at path \"_id\"",
        "name": "CastError",
        "kind": "ObjectId",
        "value": "557a3e326221681d474cf078sdsds",
        "path": "_id"
    },
    "status": "200",
    "code": -1,
    "msg": "api error",
    "paginantion": {
        "currentPage": "1",
        "pageSize": "10",
         "totalCounts":null,
        "totalPages":null
    }
}
```
 说明
1、商户流水号长度小于20位
2、支付渠道：1-移动 2-PD
3、业务编号：A003  -商户收款；A008  -个人充值 ；A011  -余额支付；A013  -新卡绑定；A018 –话费充值；A019 –流量充值
4、业务类型：A0-日常用品、A1-团购、A2-餐饮娱乐、A3-医疗保健、A4-预售票、B1其他

- 输出描述
|输出项	|输出项名称	|类型	|属性	|注释|
|:-----------|:-----------|:-----|:-----|:-----|
|rptUuid     |收款参考号    |string   | 可输 ||
|balance     |可用余额      |string   | 必输 ||
|   |身份证号      |string   | 必输 |certNo   |
|            |电话号        |string   | 可输 |mobileNo |
|userInfos   |卡号          |string   | 可输 |cardNo   |
|            |姓名          |string   | 必输 |custName |
|            |银行名称      |string   | 必输 |bankName |
|            |银行卡类型    |string   | 必输 |cardType |
- JSON示例
```
{
    "name": "200",
    "password": -1,
    "currentPage": "1",
    "pageSize": "10",
}
```
- 错误返回值
| code | msg | 说明 |
|:-------------:|:-------------|
| 1010 | xxxx | xxxx |

关于其它错误返回值与错误代码，参见 [错误代码说明](#errorcode)

##附录

## ErrorCode

### 错误代码对照表

---

##### 系统级错误

---

| 错误代码 | 返回msg | 详细描述 |
|:-------------:|:-------------|
| 400 | 系统错误，请稍候再试 | 请求参数有误 |
| 401 | 系统错误，请稍候再试 | 用户未登录 |
| 404 | 系统错误，请稍候再试 | 资源未找到 |
| 405 | 系统错误，请稍候再试 | 请求方法不支持 |
| 500 | 系统错误，请稍候再试 | 服务器错误 |

##### 业务级错误

---

| 错误代码 | 详细描述 |
|:-------------:|:-------------|
| 1010 | xxxx |


